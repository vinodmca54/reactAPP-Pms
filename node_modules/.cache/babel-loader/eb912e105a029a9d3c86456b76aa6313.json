{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vinod/pmgs-web/src/components/HistoryFindings/HistoryFinding.js\";\nimport React, { Component } from \"react\";\nimport { Form, Button, Col, Card } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\nimport { PatientRecordContext } from \"../../contexts/PatientRecordContext\";\n\nvar HistoryFinding =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HistoryFinding, _Component);\n\n  function HistoryFinding(props) {\n    var _this;\n\n    _classCallCheck(this, HistoryFinding);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HistoryFinding).call(this, props));\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var form, response, Json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                form = e.currentTarget;\n                e.preventDefault();\n                e.stopPropagation();\n\n                _this.setState({\n                  validated: true\n                });\n\n                if (!form.checkValidity()) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.prev = 5;\n                _context.next = 8;\n                return fetch(\"http://localhost:8081/api/history\", {\n                  method: \"POST\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Origin\": \"*\"\n                  },\n                  body: JSON.stringify(_objectSpread({}, _this.state, {\n                    patientId: _this.patientId\n                  }))\n                });\n\n              case 8:\n                response = _context.sent;\n                _context.next = 11;\n                return response.json();\n\n              case 11:\n                Json = _context.sent;\n                toast.success(\"Updated Successfully !\", {\n                  position: toast.POSITION.TOP_CENTER\n                });\n                _context.next = 17;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](5);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[5, 15]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.formObj = {\n      diagnosis: \"\",\n      history: \"\",\n      findings: \"\",\n      validated: false\n    };\n    _this.state = _this.formObj;\n    _this.patientId = null;\n    return _this;\n  }\n\n  _createClass(HistoryFinding, [{\n    key: \"updateState\",\n    value: function updateState() {\n      this.fetchHistoryRecord();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchHistoryRecord();\n    }\n  }, {\n    key: \"fetchHistoryRecord\",\n    value: function () {\n      var _fetchHistoryRecord = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response, history;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.context.dispatch({\n                  type: \"StartSpinner\"\n                });\n                this.patientId = this.props.id;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(\"http://localhost:8081/api/history/getByPatientId/\".concat(this.patientId), {\n                  method: \"GET\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Origin\": \"*\"\n                  }\n                });\n\n              case 5:\n                response = _context2.sent;\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                history = _context2.sent;\n                this.context.dispatch({\n                  type: \"StopSpinner\"\n                });\n                this.setState(history);\n                _context2.next = 18;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.log(\"======Error==>\", _context2.t0.message);\n                this.setState(_objectSpread({}, this.formObj, {\n                  _id: null\n                }));\n                this.context.dispatch({\n                  type: \"StopSpinner\"\n                });\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 13]]);\n      }));\n\n      function fetchHistoryRecord() {\n        return _fetchHistoryRecord.apply(this, arguments);\n      }\n\n      return fetchHistoryRecord;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          validated = _this$state.validated,\n          history = _this$state.history,\n          diagnosis = _this$state.diagnosis,\n          findings = _this$state.findings;\n      return React.createElement(PatientRecordContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, function (_ref2) {\n        var dispatch = _ref2.dispatch;\n        return React.createElement(\"div\", {\n          className: \"form\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(Card, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(Card.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"History Findings\"), React.createElement(Form, {\n          noValidate: true,\n          validated: validated,\n          onSubmit: _this2.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(Form.Group, {\n          as: Col,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Diagnosis\"), React.createElement(Form.Control, {\n          as: \"textarea\",\n          rows: \"3\",\n          value: diagnosis,\n          name: \"diagnosis\",\n          onChange: _this2.handleChange,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        })), React.createElement(Form.Group, {\n          as: Col,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"History\"), React.createElement(Form.Control, {\n          as: \"textarea\",\n          rows: \"3\",\n          value: history,\n          name: \"history\",\n          onChange: _this2.handleChange,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        })), React.createElement(Form.Group, {\n          as: Col,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \"Findings\"), React.createElement(Form.Control, {\n          as: \"textarea\",\n          rows: \"3\",\n          value: findings,\n          name: \"findings\",\n          onChange: _this2.handleChange,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        })), React.createElement(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, \"Submit\")))));\n      });\n    }\n  }]);\n\n  return HistoryFinding;\n}(Component);\n\nexport { HistoryFinding as default };\nHistoryFinding.contextType = PatientRecordContext;","map":{"version":3,"sources":["/Users/vinod/pmgs-web/src/components/HistoryFindings/HistoryFinding.js"],"names":["React","Component","Form","Button","Col","Card","toast","PatientRecordContext","HistoryFinding","props","handleChange","e","setState","target","name","value","handleSubmit","form","currentTarget","preventDefault","stopPropagation","validated","checkValidity","fetch","method","headers","Accept","body","JSON","stringify","state","patientId","response","json","Json","success","position","POSITION","TOP_CENTER","formObj","diagnosis","history","findings","fetchHistoryRecord","context","dispatch","type","id","console","log","message","_id","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Button, Col, Card } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\nimport { PatientRecordContext } from \"../../contexts/PatientRecordContext\";\n\nexport default class HistoryFinding extends Component {\n  constructor(props) {\n    super(props);\n    this.formObj = {\n      diagnosis: \"\",\n      history: \"\",\n      findings: \"\",\n      validated: false\n    };\n    this.state = this.formObj;\n    this.patientId = null;\n  }\n  updateState() {\n    this.fetchHistoryRecord();\n  }\n  componentDidMount() {\n    this.fetchHistoryRecord();\n  }\n  async fetchHistoryRecord() {\n    this.context.dispatch({ type: \"StartSpinner\" });\n    this.patientId = this.props.id;\n    try {\n      let response = await fetch(\n        `http://localhost:8081/api/history/getByPatientId/${this.patientId}`,\n        {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Origin\": \"*\"\n          }\n        }\n      );\n      let history = await response.json();\n      this.context.dispatch({ type: \"StopSpinner\" });\n      this.setState(history);\n    } catch (err) {\n      console.log(\"======Error==>\", err.message);\n      this.setState({ ...this.formObj, _id: null });\n      this.context.dispatch({ type: \"StopSpinner\" });\n    }\n  }\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n  handleSubmit = async e => {\n    const form = e.currentTarget;\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ validated: true });\n    if (form.checkValidity()) {\n      try {\n        let response = await fetch(\"http://localhost:8081/api/history\", {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Origin\": \"*\"\n          },\n          body: JSON.stringify({ ...this.state, patientId: this.patientId })\n        });\n        const Json = await response.json();\n        toast.success(\"Updated Successfully !\", {\n          position: toast.POSITION.TOP_CENTER\n        });\n      } catch (e) {}\n    }\n  };\n  render() {\n    const { validated, history, diagnosis, findings } = this.state;\n    return (\n      <PatientRecordContext.Consumer>\n        {({ dispatch }) => {\n          return (\n            <div className=\"form\">\n              <Card>\n                <Card.Body>\n                  <Card.Title>History Findings</Card.Title>\n                  <Form\n                    noValidate\n                    validated={validated}\n                    onSubmit={this.handleSubmit}\n                  >\n                    <Form.Group as={Col}>\n                      <Form.Label>Diagnosis</Form.Label>\n                      <Form.Control\n                        as=\"textarea\"\n                        rows=\"3\"\n                        value={diagnosis}\n                        name=\"diagnosis\"\n                        onChange={this.handleChange}\n                        required\n                      />\n                    </Form.Group>\n                    <Form.Group as={Col}>\n                      <Form.Label>History</Form.Label>\n                      <Form.Control\n                        as=\"textarea\"\n                        rows=\"3\"\n                        value={history}\n                        name=\"history\"\n                        onChange={this.handleChange}\n                        required\n                      />\n                    </Form.Group>\n                    <Form.Group as={Col}>\n                      <Form.Label>Findings</Form.Label>\n                      <Form.Control\n                        as=\"textarea\"\n                        rows=\"3\"\n                        value={findings}\n                        name=\"findings\"\n                        onChange={this.handleChange}\n                        required\n                      />\n                    </Form.Group>\n                    <Button variant=\"primary\" type=\"submit\">\n                      Submit\n                    </Button>\n                  </Form>\n                </Card.Body>\n              </Card>\n            </div>\n          );\n        }}\n      </PatientRecordContext.Consumer>\n    );\n  }\n}\nHistoryFinding.contextType = PatientRecordContext;\n"]},"metadata":{},"sourceType":"module"}