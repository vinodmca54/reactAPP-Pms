{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/vinod/pmgs-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vinod/pmgs-web/src/components/Investigations/Investigation.js\";\nimport React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Form, Button, Col, Card } from \"react-bootstrap\";\nimport { PatientRecordContext } from \"../../contexts/PatientRecordContext\";\n\nvar Investigation =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Investigation, _Component);\n\n  function Investigation(props) {\n    var _this;\n\n    _classCallCheck(this, Investigation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Investigation).call(this, props));\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var form, response, Json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                form = e.currentTarget;\n                e.preventDefault();\n                e.stopPropagation();\n\n                _this.setState({\n                  validated: true\n                });\n\n                if (!form.checkValidity()) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 7;\n                return fetch(\"http://localhost:8081/api/investigation\", {\n                  method: \"POST\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Origin\": \"*\"\n                  },\n                  body: JSON.stringify(_objectSpread({}, _this.state, {\n                    patientId: _this.patientId\n                  }))\n                });\n\n              case 7:\n                response = _context.sent;\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                Json = _context.sent;\n                toast.success(\"Updated Successfully !\", {\n                  position: toast.POSITION.TOP_CENTER\n                });\n                console.log(\"=======>INVESTIGATION POST RES\", Json);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      investigation: \"\",\n      validated: false\n    };\n    _this.patientId = null;\n    return _this;\n  }\n\n  _createClass(Investigation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.patientId = this.props.id;\n      this.fetchInvestigationRecord();\n    }\n  }, {\n    key: \"fetchInvestigationRecord\",\n    value: function () {\n      var _fetchInvestigationRecord = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response, history;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.context.dispatch({\n                  type: \"StartSpinner\"\n                });\n                this.patientId = this.props.id;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(\"http://localhost:8081/api/investigation/getByPatientId/\".concat(this.patientId), {\n                  method: \"GET\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Origin\": \"*\"\n                  }\n                });\n\n              case 5:\n                response = _context2.sent;\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                history = _context2.sent;\n                this.context.dispatch({\n                  type: \"StopSpinner\"\n                });\n                this.setState(history);\n                _context2.next = 18;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.log(\"======Error==>\", _context2.t0.message);\n                this.setState(_objectSpread({}, this.formObj, {\n                  _id: null\n                }));\n                this.context.dispatch({\n                  type: \"StopSpinner\"\n                });\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 13]]);\n      }));\n\n      function fetchInvestigationRecord() {\n        return _fetchInvestigationRecord.apply(this, arguments);\n      }\n\n      return fetchInvestigationRecord;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var validated = this.state.validated;\n      return React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Card, {\n        style: {\n          width: \"48rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Investigation\"), React.createElement(Form, {\n        noValidate: true,\n        validated: validated,\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"15\",\n        value: this.state.investigation,\n        name: \"investigation\",\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Submit\")))));\n    }\n  }]);\n\n  return Investigation;\n}(Component);\n\nexport { Investigation as default };\nInvestigation.contextType = PatientRecordContext;","map":{"version":3,"sources":["/Users/vinod/pmgs-web/src/components/Investigations/Investigation.js"],"names":["React","Component","toast","Form","Button","Col","Card","PatientRecordContext","Investigation","props","handleChange","e","setState","target","name","value","handleSubmit","form","currentTarget","preventDefault","stopPropagation","validated","checkValidity","fetch","method","headers","Accept","body","JSON","stringify","state","patientId","response","json","Json","success","position","POSITION","TOP_CENTER","console","log","investigation","id","fetchInvestigationRecord","context","dispatch","type","history","message","formObj","_id","width","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Form, Button, Col, Card } from \"react-bootstrap\";\nimport { PatientRecordContext } from \"../../contexts/PatientRecordContext\";\n\nexport default class Investigation extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      investigation: \"\",\n      validated: false\n    };\n    this.patientId = null;\n  }\n  componentDidMount() {\n    this.patientId = this.props.id;\n    this.fetchInvestigationRecord();\n  }\n  async fetchInvestigationRecord() {\n    this.context.dispatch({ type: \"StartSpinner\" });\n    this.patientId = this.props.id;\n    try {\n      let response = await fetch(\n        `http://localhost:8081/api/investigation/getByPatientId/${\n          this.patientId\n        }`,\n        {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Origin\": \"*\"\n          }\n        }\n      );\n      let history = await response.json();\n      this.context.dispatch({ type: \"StopSpinner\" });\n      this.setState(history);\n    } catch (err) {\n      console.log(\"======Error==>\", err.message);\n      this.setState({ ...this.formObj, _id: null });\n      this.context.dispatch({ type: \"StopSpinner\" });\n    }\n  }\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n  handleSubmit = async e => {\n    const form = e.currentTarget;\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ validated: true });\n    if (form.checkValidity()) {\n      let response = await fetch(\"http://localhost:8081/api/investigation\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Origin\": \"*\"\n        },\n        body: JSON.stringify({...this.state,patientId: this.patientId})\n      });\n      const Json = await response.json();\n      toast.success(\"Updated Successfully !\", {\n        position: toast.POSITION.TOP_CENTER\n      });\n      console.log(\"=======>INVESTIGATION POST RES\", Json);\n    }\n  };\n  render() {\n    const { validated } = this.state;\n    return (\n      <div className=\"form\">\n        <Card style={{ width: \"48rem\" }}>\n          <Card.Body>\n            <Card.Title>Investigation</Card.Title>\n            <Form noValidate validated={validated} onSubmit={this.handleSubmit}>\n              <Form.Group as={Col}>\n                <Form.Control\n                  as=\"textarea\"\n                  rows=\"15\"\n                  value={this.state.investigation}\n                  name=\"investigation\"\n                  onChange={this.handleChange}\n                  required\n                />\n              </Form.Group>\n              <Button variant=\"primary\" type=\"submit\">\n                Submit\n              </Button>\n            </Form>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n}\nInvestigation.contextType = PatientRecordContext;\n"]},"metadata":{},"sourceType":"module"}